var wffnUtm_terms=wffnUtm.cookieKeys,wffnCookieManage={setCookie:function(e,r,t){var n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3);var o="expires="+n.toUTCString(),f=";domain=."+wffnGetHost(document.location.hostname);document.cookie=e+"="+r+";"+o+f+";path=/"},getCookie:function(e){for(var r=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var o=t[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(r))return o.substring(r.length,o.length)}return""},remove:function(e){var r=new Date;r.setTime(r.getTime()-864e5);var t="expires="+r.toUTCString();document.cookie=e+"=;"+t+";path=/"},commons:{inArray:function(e,r){return-1===r.indexOf(e)}}};function wffnGetHost(e){for(var r={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t=r.parser[r.strictMode?"strict":"loose"].exec(e),n={},o=14;o--;)n[r.key[o]]=t[o]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(e,t,o){t&&(n[r.q.name][t]=o)}),n.host.replace("www.","")}function wffnGetQueryVars(){try{var e={},r=[];return window.location.search.substr(1).split("&").forEach(function(t){(r=t.split("=")).length>1&&(e[r[0]]=r[1])}),wffnDefaultEvent(e)}catch(e){console.log(e)}}function wffnDefaultEvent(e){if("object"==typeof Intl&&"object"==typeof Intl.DateTimeFormat()){let r=Intl.DateTimeFormat().resolvedOptions();r.hasOwnProperty("timeZone")&&(e.timezone=r.timeZone)}if(e.flt=wffnGetAdminTime(),e.hasOwnProperty("fkreferrer")&&""!==e.fkreferrer)e.referrer=e.fkreferrer,delete e.fkreferrer;else{const r=document.referrer,t=e=>new URL(e).hostname;e.referrer=!r||wffnUtm.excludeDomain.some(e=>t(r).endsWith(e))||r.includes(window.location.hostname)?"":r}e.fl_url=void 0!==window.location.pathname?window.location.pathname:"/";let r=wffnDetectDevice();return void 0!==r&&""!==r&&(void 0!==r.browser.name&&(e.browser=r.browser.name),void 0!==r.is_mobile&&(e.is_mobile=r.is_mobile)),e}function wffnGetAdminTime(e=!1,r=!1){var t=(new Date).toISOString(),n=new Date(t);n.setMinutes(n.getMinutes()+parseInt(wffnUtm.utc_offset)),t=n.toISOString();const[o,f]=t.split("T"),[a,i,s]=o.split("-").map(Number),[c,m,w]=f.split(":"),u=w.split(".")[0];return!0===e?(n=new Date(a+"-"+i+"-"+s+" "+c+":"+m+":"+u),Math.round(n.getTime()/1e3)):!0===r?new Date(a+"-"+i+"-"+s+" "+c+":"+m+":"+u):a+"-"+i+"-"+s+" "+c+":"+m+":"+u}function wffnGetTrafficSource(){try{var e=document.referrer.toString(),r=0===e.length,t=!r&&0===e.indexOf(wffnUtm.site_url),n=!(r||t),o=""!==wffnCookieManage.getCookie("wffn_traffic_source")&&wffnCookieManage.getCookie("wffn_traffic_source");return!1===n?o||"direct":o&&o===e?o:e}catch(e){return""}}function wffnManageCookies(){try{var e=wffnGetTrafficSource();"direct"!==e?wffnCookieManage.setCookie("wffn_traffic_source",e,2):wffnCookieManage.remove("wffn_traffic_source");var r=wffnGetQueryVars();for(var t in wffnUtm_terms)Object.prototype.hasOwnProperty.call(r,wffnUtm_terms[t])&&(-1!==["flt","fl_url","referrer"].indexOf(wffnUtm_terms[t])?void 0!==wffnCookieManage&&""===wffnCookieManage.getCookie("wffn_"+wffnUtm_terms[t])&&wffnCookieManage.setCookie("wffn_"+wffnUtm_terms[t],r[wffnUtm_terms[t]],2):wffnCookieManage.setCookie("wffn_"+wffnUtm_terms[t],r[wffnUtm_terms[t]],2))}catch(e){console.log(e)}}function wffnGetUTMs(){try{var e={},r=wffnGetQueryVars();for(var t in wffnUtm_terms)""===wffnCookieManage.getCookie("wffn_"+wffnUtm_terms[t])&&Object.prototype.hasOwnProperty.call(r,wffnUtm_terms[t])&&(e[wffnUtm_terms[t]]=wffnCookieManage.getCookie("wffn_"+wffnUtm_terms[t]));return e}catch(e){return{}}}function wffnAddTrafficParamsToEvent(e){try{var r=wffnUtm.genericParamEvents,t=JSON.parse(r);for(var n in t)e[n]=t[n];var o=wffnGetAdminTime(!1,!0),f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][o.getDay()],a=["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()],i=["00-01","01-02","02-03","03-04","04-05","05-06","06-07","07-08","08-09","09-10","10-11","11-12","12-13","13-14","14-15","15-16","16-17","17-18","18-19","19-20","20-21","21-22","22-23","23-24"][o.getHours()];e.event_month=a,e.event_day=f,e.event_hour=i,e.traffic_source=wffnGetTrafficSource();var s=wffnGetUTMs();for(var c in s)e[c]=s[c];return e}catch(r){return e}}function wffnDetectDevice(){let e=[navigator.userAgent,navigator.vendor,window.opera],r=!1;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(r=!0),!1===r){let e=navigator.userAgent||navigator.vendor||window.opera;(e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1)&&(r=!0)}return{is_mobile:r,browser:wffnDetectBrowser(e.join(" "),[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}])}}function wffnDetectBrowser(e,r){var t,n,o,f=0,a=0;for(f=0;f<r.length;f+=1)if(new RegExp(r[f].value,"i").test(e)){if(t=new RegExp(r[f].version+"[- /:;]([\\d._]+)","i"),o="",(n=e.match(t))&&n[1]&&(n=n[1]),n)for(n=n.split(/[._]+/),a=0;a<n.length;a+=1)o+=0===a?n[a]+".":n[a];else o="0";return{name:r[f].name,version:parseFloat(o)}}return{name:"unknown",version:0}}wffnManageCookies();